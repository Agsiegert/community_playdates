<!DOCTYPE html>
<html>
  <head>
    <title>CommunityPlaydates</title>
    <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
    <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Community Playdates</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li><%= link_to "Create A New Playdate", new_event_path %></li>
          <li><%= link_to "View All Playdates", events_path %></li>
        </ul>
        <% if current_user %>
          <div class="pull-right">
            <%= image_tag current_user.avatar %>
            <%= current_user.email %>
            Signed in as <a href="#" class="navbar-link"><%= current_user.name %></a>
            <%= link_to "Logout", destroy_user_session_path, method: :delete %>
          </div>
        <% else %>
          <%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook), id: "sign_in" %>
        <% end %>
      </div>
    </div>

    <%= yield %>

    <script type="text/javascript">
      if (window.location.hash && window.location.hash == '#_=_') {
        if (window.history && history.pushState) {
          window.history.pushState("", document.title, window.location.pathname);
        } else {
          // Prevent scrolling by storing the page's current scroll offset
          var scroll = {
top: document.body.scrollTop,
     left: document.body.scrollLeft
          };
          window.location.hash = '';
          // Restore the scroll offset, should be flicker free
          document.body.scrollTop = scroll.top;
          document.body.scrollLeft = scroll.left;
        }
      }
</script>

  </body>
</html>

