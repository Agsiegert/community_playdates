<%= form_for(@event) do |f| %>
  <%= render "shared/errors", object: @event %>
  <%= render "shared/errors", object: @location %>

  <fieldset>
    <ol>
      <li class="required">
        <%= f.label :playdate_name %>
        <%= f.text_field :name, autofocus: true %>
      </li>
      <li class="required">
        <%= f.label :description %>
        <%= f.text_area :description, cols: 40, rows: 7 %>
      </li>

      <%= fields_for :location, @location do |k| %>
        <li class="required">
          <%= k.label :venue %>
          <%= k.text_field :venue, size: 30 %>
        </li>

        <li class="required">
          <%= k.label :street_address %>
          <%= k.text_field :street_address, size: 30 %>
        </li>

        <li class="required">
          <%= k.label :city %>
          <%= k.text_field :city, size: 30 %>
        </li>

        <li class="required">
          <%= k.label :state%>
          <%= k.text_field :state, size: 2 %>
        </li>

        <li class="required">
          <%= k.label :zipcode %>
          <%= k.text_field :zipcode, size: 10 %>
        </li>
      <% end %>

      <li class="required">
        <%= f.label :date %>
        <%= f.text_field :date, id: 'datepicker', value: Date.today %>
      </li>

      <li class="required">
        <%= f.label :start_time %>
        <%= f.text_field :start_time, id: 'start'  %>
      </li>

      <li class="required">
        <%= f.label :end_time %>
        <%= f.text_field :end_time, id: 'end'  %>
      </li>
    </ol>
    <p>
      <%= f.submit 'Create Playdate' %>
      <%= link_to "Cancel", events_path, class: 'button' %>
    </p>
  </fieldset>
<% end %>

<script>
  $(document).ready(function() {
    // create DatePicker from input HTML element
    $("#datepicker").kendoDatePicker({

    });
  });

  $(document).ready(function() {
    function startChange() {
    var startTime = start.value();

    if (startTime) {
      startTime = new Date(startTime);

      end.max(startTime);

      startTime.setMinutes(startTime.getMinutes() + this.options.interval);

      end.min(startTime);
      end.value(startTime);
      }
    }

    //init start timepicker
    var start = $("#start").kendoTimePicker({
      change: startChange
    }).data("kendoTimePicker");

    //init end timepicker
    var end = $("#end").kendoTimePicker().data("kendoTimePicker");

    //define min/max range
    start.min("8:00 AM");
    start.max("6:00 PM");

    //define min/max range
    end.min("8:00 AM");
    end.max("7:30 AM");
  });
</script>
